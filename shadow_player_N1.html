<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Shadowing Player N1</title>
    <style>
      body {
        font-family: sans-serif;
        text-align: center;
        background: #f5f5f5;
        margin-top: 50px;
      }
      button {
        font-size: 1.2em;
        margin: 10px;
        padding: 10px 20px;
      }
    </style>
  </head>
  <body>
    <h1>Shadowing Player N1</h1>
    <div id="player"></div>
    <br />
    <button onclick="playVideo()">â–¶ï¸ Play</button>
    <button onclick="repeatOnce()">ğŸ” Repeat</button>

    <script>
      let player;
      let playStartTime = 0;
      let repeatEndTime = 0;
      let repeatInterval;

      function onYouTubeIframeAPIReady() {
        player = new YT.Player("player", {
          height: "360",
          width: "640",
          videoId: "rgep6dyMASw", // â† N1ç”¨ã®YouTube ID
          events: {
            onReady: onPlayerReady,
          },
        });
      }

      function onPlayerReady(event) {
        // åˆæœŸåŒ–æ™‚ã«å¿…è¦ãªã‚‰è‡ªå‹•å†ç”Ÿãªã©è¿½åŠ å¯èƒ½
      }

      function playVideo() {
        playStartTime = player.getCurrentTime();
        player.playVideo();
      }

      function repeatOnce() {
        repeatEndTime = player.getCurrentTime();
        const safeStart = Math.max(0, playStartTime - 1.0); // â† â˜…ã“ã“ãŒã€Œ1ç§’æˆ»ã—ã€

        player.seekTo(safeStart);
        player.playVideo();

        if (repeatInterval) clearInterval(repeatInterval);
        repeatInterval = setInterval(() => {
          if (player.getCurrentTime() >= repeatEndTime) {
            player.pauseVideo();
            clearInterval(repeatInterval);
          }
        }, 100);
      }

      // YouTube IFrame API èª­ã¿è¾¼ã¿
      const tag = document.createElement("script");
      tag.src = "https://www.youtube.com/iframe_api";
      document.body.appendChild(tag);
    </script>
  </body>
</html>
