<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Shadow Player N4</title>
</head>
<body>
  <div id="player"></div>
  <br>
  <button id="playBtn">â–¶ Play</button>
  <button id="repeatBtn">ğŸ” Repeat</button>

  <script>
    let tag = document.createElement("script");
    tag.src = "https://www.youtube.com/iframe_api";
    document.head.appendChild(tag);

    let player;
    let playStartTime = 0;

    function onYouTubeIframeAPIReady() {
      player = new YT.Player("player", {
        height: "360",
        width: "640",
        videoId: "j0ZsUwnOgKQ",  // â† N4ã®YouTubeå‹•ç”»IDï¼ˆãƒãƒ£ãƒƒãƒˆå±¥æ­´ã‹ã‚‰ï¼‰
        playerVars: {
          rel: 0,
          modestbranding: 1
        },
        events: {
          onReady: onPlayerReady
        }
      });
    }

    function onPlayerReady(event) {
      document.getElementById("playBtn").addEventListener("click", () => {
        playStartTime = player.getCurrentTime();
        player.playVideo();
      });

      document.getElementById("repeatBtn").addEventListener("click", () => {
        const currentTimeAtRepeat = player.getCurrentTime();
        const repeatStart = Math.max(0, playStartTime - 2);
        const duration = currentTimeAtRepeat - repeatStart;

        player.seekTo(repeatStart);
        player.playVideo();

        setTimeout(() => {
          player.pauseVideo();
        }, duration * 1000);
      });
    }
  </script>
</body>
</html>
